# RUT200_0E47
+ 更新韌體至RUT2M_R_00.07.06
+ 從網頁進行恢復原廠設定
  + WIFI訊號異常，把電源拔掉一陣子再裝上就好了。
+ 預設資訊:
  + WIFI SSID=RUT200_0E47
  + WIFI PASSWORD=Bq7x5V9S

### 密碼設定
+ 方案A

### SIM卡設定
+ PIN碼=0000

### RMS設定
+ 關閉

### Date & Time設定
+ 時區為台北


## 搭配使用測試環境DS118
+ 韌體版本: DSM 7.2.1-69057

### 裝置名稱
+ DS118_MTU5C

### 管理員帳號
+ cgrg.service

### 更新設定
+ 通知我，我會自行安裝

### 登入後的初次設定
+ 各種提示都放棄不安裝
+ 去關掉密碼規定，設定自己想要的密碼

### 儲存空間管理員
+ 主選單>儲存空間管理員
  + 東西都用預設值，一直按下一步，燒等一些時間等待最佳化完成。

### 開啟家目錄
+ 控制台>使用者&群組>進階設定>家目錄打勾

### 安裝套件
+ 文字編輯器
+ Antivirus Essent
+ MariaDB 10
  + 密碼:Au,4vu.41i6
  + 連接埠:3306
+ phpMyAdmin 
  + 會順便安裝
    + Web Station
    + PHP 8.0
+ Apache HTTP Server 2.4
+ Web Station
  + 「Web Station>預設服務」頁面中按「編輯」，「HTTP 後端伺服器」選「Apache HTTP Server 2.4」。
  + 「Web Station>一般設定」頁面中按「編輯」，「PHP」選「Default Profile ( PHP 8.0)」。
  + 「Web Station>指令碼語言設定>PHP>使用者定義」按「編輯」，將擴充模組全選。
+ 關閉不必要的檔案服務(控制台>檔案服務>SMB/AFP/NFS)
  + 啟動 SMB 服務 取消勾選
  + 啟動 AFP 服務 取消勾選
  + 啟動 NFS 服務 取消勾選
+ 開啟 FTP 功能(控制台>檔案服務>FTP)
  + 啟動 FTP 服務(未加密) 勾選
  + UTF-8 編碼 停用
  + 使用時間 local time
+ 關閉不必要的檔案服務(控制台>檔案服務>進階設定)
  + 啟動 Bonjour 服務探索 取消勾選
  + 區域網路裝置可使用 Windows 網路探索來存取 DSM 網頁介面。 取消勾選

### MTU5C設定
+ 用管理員帳號cgrg.service建立一個新使用者MTU5C
 + 密碼:45002931
 + 一開始所有功能都用預設，都會開啟
 + 建立一個新的共用區「Rsync_FUSH」，關閉資源回收桶，特別允許MTU5C有讀寫權限。
 + 測試SFTP功能
   + 用「FileZilla-3.66.5」
   + 在站台管理員選SFTP，設定主機IP，PORT留白，登入形式選「一般」，會可以輸入帳號密碼，就是上面的MTU5C // 45002931。
   + 應該會看到兩個目錄，「home」與「Rsync_FUSH」。
   + 至此表示成功。
 + 產生金鑰:
   + 用win10
   + 搜尋找到「Windows PowerShell」，執行。不要用管理員權限。
   + 在命令列中會看到目前的位置，例如:「C:\Users\CGRG>」。這表示你的使用者名稱為「CGRG」
     + 用檔案總管進去這個資料夾，確認下面有沒有一個「.ssh」的資料夾，若有，先刪掉以避免混淆後續操作。
   + 在命令列中輸入:
     ```
     ssh-keygen
     ```
   + 看到提問就直接按Enter，按到最後會展示一個The key's randomart image...。然後回到命令列。
   + 在命令列中輸入:
     ```
     cd .ssh
     ```
   + 在命令列中輸入:
     ```
     cat id_rsa.pub >> authorized_keys
     ```
   + 用檔案總管進去找到剛才製作出的3個檔案，用途為:
     + authorized_keys 給Server用的
     + id_rsa 給client用的
     + id_rsa.pub 給Server用的
  + 測試使用金鑰登入SFTP
    + 用「FileZilla-3.66.5」
    + 在站台管理員選SFTP，設定主機IP，PORT留白，登入形式選「一般」，會可以輸入帳號密碼，就是上面的MTU5C // 45002931。
    + 應該會看到兩個目錄，「home」與「Rsync_FUSH」。
    + 移動到「home」資料夾中。
    + 建立「.ssh」資料夾。
    + 將剛剛三個檔案都上傳到「.ssh」資料夾中。
    + 從當前SFTP站點離線。
    + 在站台管理員選SFTP，設定主機IP，PORT留白，登入形式選「金鑰檔案」，只能輸入帳號，就是上面的MTU5C。按瀏覽，去找剛才的「id_rsa」檔案。
      + 要把過濾器改成`「所有檔案(*.*)」才能找到檔案，選完的路徑例如:「C:\Users\CGRG\.ssh\id_rsa」。
    + 按連線，若能登入，表示成功。若無法登入，先嘗試回到一般登入法，再確認檔案，或重開NAS。
+ NAS家目錄=/var/services/homes/MTU5C
+ NAS通常的家目錄(絕對路徑)=/volume1/homes/MTU5C
+ NAS通常的共用資料夾(絕對路徑)=/volume1/Rsync_FUSH
